(function(a){a.fn.masonryFilter=function(b){var d=function(e){setTimeout(function(){e.masonry("layout")},100)};var c=function(e){var g=e.masonry("getAllItems"),h=[],f=[];a.each(g,function(k){var l=g[k];var j=a(l.element),m=b.filter&&b.filter.call(j);if(m){if(l.isHidden){l.isIgnored=false;h.push(l)}}else{if(!l.isHidden){l.isIgnored=true;f.push(l)}}});e.masonry("hide",f);e.masonry("reveal",h);d(e)};return this.each(function(){var e=a(this);c(e)})}}(window.jQuery));